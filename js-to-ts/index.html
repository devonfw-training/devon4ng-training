<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>JavaScript and TypeScript Introduction</title>
    <link rel="icon" href="../common/img/favicon.ico">

    <link href="https://fonts.googleapis.com/css?family=Ubuntu+Mono" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">
    <link rel="stylesheet" href="../node_modules/reveal.js/css/reveal.css">
    <link rel="stylesheet" href="../node_modules/reveal.js/css/theme/white.css" id="theme">

    <link rel="stylesheet" href="../common/css/common.css">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="../common/css/github-gist.css">

    <!-- Printing and PDF exports -->
    <script>
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match(/print-pdf/gi) ? '../node_modules/reveal.js/css/print/pdf.css' : '../node_modules/reveal.js/css/print/paper.css';
        document.getElementsByTagName('head')[0].appendChild(link);
    </script>
</head>

<body>
    <style>

    </style>
    <section class="angular-link">
        <a href="http://angular.io" target="_blank"><img height="50px" src="../common/img/angular.svg"></a>
    </section>
    <section class="devon-link">
        <a href="http://devonfw.github.io" target="_blank"><img height="30px" src="../common/img/devon_logo_blue.png"></a>
    </section>
    <div class="devon reveal">
        <div class="slides">
            <section>
                <img class="header-logo" src="img/js-logo.png" alt="javascript logo">
                <p>ECMAScript (<strong>JavaScript</strong>)</p>
            </section>
            <section>
                <p>
                    <p>ECMAScript (ES) first <strong>introduced 1997</strong> turned 25 in 2022 and its popularity is <strong>still growing.</strong></p>
                    <p><small><strong>3th</strong> <a href="https://pypl.github.io/PYPL.html" target="_blank">PYPL</a> (September 2021), <strong>7th</strong> <a href="https://www.tiobe.com/tiobe-index/" target="_blank">TIOBE Index</a> (September 2021)<br>
                (TypeScript is listed separately)</small></p>
                </p>
                <aside class="notes">
                    For a long time is what not very popular, until the browser engines got faster engines.
                </aside>
            </section>
            <section>
                <h2>JavaScript is everywhere...</h2>
                <div style="display: flex; justify-content: space-around;">
                    <div style="display: flex; flex-direction: column; align-items: start">
                        <div style="display: flex; justify-content: center; align-items: center">
                            <img class="header-logo" style="height: 138px; margin: -30px" src="img/edge-logo.png" alt="javascript logo">
                            <img class="header-logo" style="height: 90px" src="img/chrome-logo.png" alt="javascript logo">
                            <img class="header-logo" style="height: 90px" src="img/firefox-logo.png" alt="javascript logo">
                            <img class="header-logo" style="height: 90px" src="img/safari-logo.png" alt="javascript logo">
                        </div>
                        <p style="text-align: left; margin-left: 28px">on the client</p>
                    </div>
                    <div style="display: flex; flex-direction: column; align-items: start">
                        <img class="header-logo" style="height: 90px; margin-left: 0" src="img/nodejs-logo.png" alt="javascript logo">
                        <p style="text-align: left">on the server</p>
                    </div>
                </div>
                <aside class="notes">
                    Java's slogan from 95 was "Write once, run anywhere". It is still not true for Java. Javascript achieved it.
                </aside>
            </section>
            <section>
                <h2>ECMAScript versions</h2>
                <ul>
                    <li>ES3 1999</li>
                    <li>ES5 2009</li>
                    <li>ES2015 (f.k.a. ES6) 2015</li>
                    <li>ES2016, ES2017, ..., ES.Next</li>
                </ul>
                <p>
                    <small>
                    <a href="http://caniuse.com/#search=es6" target="_blank">Can I use ES6 (Browsers Support)</a><br>
                    <a href="http://node.green/" target="_blank">node.green (Node.js Support)</a>
                </small>
                </p>
                <aside class="notes">
                    Long time without new versions.<br>
                    Since ES2015 new useful features are introduced every year.<br>
                    The amount of JS projects increased massively since then.
                </aside>
            </section>
            <section>
                <h3>Why ES5 was relevant for so long</h3>
                <ul>
                    <li>Basically every browser supported it</li>
                    <li>Internet Explorer did not support newer versions</li>
                    <li>Most TypeScript projects (still) <strong>compile</strong> to it.</li>
                    <li>There are lots of <strong>legacy projects</strong>, <strong>build scripts</strong>, etc. written in ES5.</li>
                    <li>In 2022 Internet Explorer's market share is &lt;1% Projects don't need to support it anymore</li>
                    <li>Today's projects should compile to ES2016+</li>
                </ul>
                <aside class="notes">
                    <ul>
                        <li>IE did not update itself to a new version. So new language features did not arrive at the users automatically</li>
                        <li>Other browsers like Chrome and Firefox updated themselfes and got new language features. Only IE was missing</li>
                        <li>Nowadays the "evergreen" browsers get new features constantly</li>
                        <li>Node.js supported new ES versions for a long time</li>
                        <li>Setting the target version to ES2016 instead of ES5 significally reduces the file size. All browsers support it</li>
                    </ul>
                    <br>
                </aside>
            </section>
            <section>
                <h2>A word on ES5</h2>
                <p style="text-align: left"><strong>ES5 / classic JavaScript...</strong></p>
                <p>...has nothing in common with Java&nbsp;<small>* except for some key words</small></p>
                <p>...is more like <q cite="http://searchservervirtualization.techtarget.com/definition/Our-Favorite-Technology-Quotations">Lisp in C's clothing</q>&nbsp;&nbsp;<small>*Douglas Crockford</small></p>
                <p>...has objects, but is class-free</p>
                <p>...is of single-threaded nature</p>
                <p>...has asynchronous programming model</p>
                <p>...is object oriented & functional at the same time</p>
                <aside class="notes">
                    <ul>
                        <li>The name was given for marketing. It is the result of a deal between Nescape (creator of JS) and Sun (owner of Java)</li>
                        <li>JavaScript was create in just 10 days by Brendan Eich</li>
                        <li>JavaScript belonged to Netscape. Microsoft created JScript for their browser. In 97 standardized as ECMAScript</li>
                        <li>Nowadays the "evergreen" browsers get new features constantly</li>
                    </ul>
                    <br>
                </aside>
            </section>
            <section>
                <p>Classic JavaScript has very confusing concepts (at least for Java / .Net devs...). Here are a few...</p>
                <ul>
                    <li>Hoisting</li>
                    <li><code>this</code> is function scoped instead of block scoped</li>
                    <li>Lexical Scope</li>
                    <li>Object literals</li>
                    <li>Coercion (always use <code>===</code>)</li>
                </ul>
                <aside class="notes">
                    <ul>
                        <li>All new versions need to be backwards compatible to not break old websites. "Don't break the web!"</li>
                        <li>Hoisting and scope of "this" is tackled by using const/let instead of var</li>
                        <li>Lexical Scope, object literals and coercion are still present in JavaScript and TypeScript</li>
                        <li>In console show creation of an object with {...} as example for object literals. No "new ..." needed</li>
                        <li>In console show coercion example. 1 == "1" is true <br>
                            Coercion works for other operators as well. "1"+1 === "11". "1"-1 === 0<br>
                            let a=+"42"; => a is number. This is actually a good way to transform a string to a number.
                        </li>
                    </ul>
                </aside>
            </section>
            <section>
                <p>An example for a well known JavaScript pattern (<strong>IIFE</strong>)</p>
                <pre><code class="max-height-unset" data-trim class="javascript">
var person = (function () {
    var details = {
        firstName: 'John',
        lastName: 'Example',
        age: 30
    };

    return {
        letMeIntroduceMyself: function () {
            return 'My name is ' +
                details.firstName + ' ' + details.lastName;
        }
    };
})();

person.letMeIntroduceMyself(); // My name is John Example
person.details; // undefined
            </code></pre>
            <aside class="notes">
               Immediatly Invoked Functional Expression.<br>
               This was the go to pattern to create private variables.<br>
               TypeScript classes still compile to this, if you set the target version to ES5. Newer versions have support for classes.
            </aside>
            </section>
            <section>
                <p>Newer ES versions introduced concepts like classes, modules and block scope variables.</p>
                <p>With TypeScript we can use those features today - and that's where we will continue.</p>
            </section>
            <section id="typescript" data-background-image="img/foreground_bluprint.svg" data-background-position="top" data-background-size="100% auto" data-background-color="#152740">
                <img style="height: 100px" class="header-logo plain margin-top-6-em" src="img/ts-logo.svg" alt="TS logo">
                <div class="bannerTextHeadline">
                    <p>JavaScript that scales.</p>
                </div>
                <div class="bannerText">
                    <p>TypeScript is a typed superset of JavaScript that compiles to plain JavaScript.</p>
                    <p>Any browser. Any host. Any OS. Open source.</p>
                </div>
            </section>
            <section>
                <h2>Facts</h2>
                <ul>
                    <li>invented by <strong>Microsoft</strong></li>
                    <li><strong>Google</strong> dropped AtScript and chose <strong>TypeScript for Angular</strong></li>
                    <li>valid JavaScript syntax is valid TypeScript syntax</li>
                </ul>
                <aside class="notes">
                    <ul>
                        <li>Support from Microsoft and Google -> TypeScript has strong support by major web corporations</li>
                        <li>Some old JavaScript weirdness could not be removed to stay compatible</li>
                    </ul>
                 </aside>
            </section>
            <section>
                <p>Let's start with the quickstart example from <a href="https://www.typescriptlang.org/docs/handbook/typescript-in-5-minutes.html">typescriptlang.org</a></p>
                <pre><code class="javascript" data-trim>
function greeter(person) {
    return "Hello, " + person;
}

let user = "Jane User";

document.body.innerHTML = greeter(user);
                </code></pre>
                <aside class="notes">
                    <ul>
                        <li>"user" could be of any type and it still works</li>
                        <li>if "user" is no string it will be converted automatically</li>
                    </ul>
                 </aside>
            </section>
            <section>
                <p>Could be written in TypeScript...</p>
                <pre><code class="javascript" data-trim data-noescape>
function greeter(person<mark>: string</mark>) {
    return "Hello, " + person;
}

let user = "Jane User";

document.body.innerHTML = greeter(user);
                </code></pre>
                <br><br><br>
            </section>
            <section>
                <p>...and be type safe...</p>
                <pre><code class="typescript" data-trim>
function greeter(person: string) {
    return "Hello, " + person;
}

let user = [0, 1, 2];

document.body.innerHTML = greeter(user);
                </code></pre>
                <p>Leads to compile time error.</p>
                <p><small>error TS2345: Argument of type 'number[]' is not assignable to parameter of type 'string'.</p></small>
            </section>
            <section>
                <p>... and is even supported by VS Code</p>
                <img src="img/ts-vscode-error.png" alt="VS Code TS Error" class="plain no-border">
            </section>
            <section>
                <pre><code class="typescript" data-trim>
interface Person {
    firstName: string;
    lastName: string;
}

function greeter(person: Person) {
    return "Hello, " + person.firstName + " " + person.lastName;
}

let user = { firstName: "Jane", lastName: "User" };

document.body.innerHTML = greeter(user);
                </code></pre>
                <p>In TypeScript, two types are compatible if their internal structure is compatible.</p>
                <aside class="notes">
                    <ul>
                        <li>Any object that has at least the properties "firstName" and "lastName" fulfills the interface Person</li>
                    </ul>
                 </aside>
            </section>
            <section>
                <img src="img/greet_person.png" class="plain no-border" alt="">
                <p>TypeScript works well with VS Code</p>
            </section>
            <section>
                <pre><code data-trim class="typescript">
interface OnInit {
  ngOnInit(): void
}

class MyComponent implements OnInit {

  ngOnInit(): void {
    console.log('Component activated.')
  }

}
              </code></pre>
                <p>Interfaces can be implemented.</p>
            </section>
            <section>
                <pre><code data-trim class="max-height-unset typescript">
abstract class Speaker {
  constructor(protected location: string) { }
  abstract speak(): void;
}
    
class Headphones extends Speaker {
    
  constructor() {
    super('in ear');
  }
    
  speak(): void {
    console.log(this.location + ': la la la');
  }
    
}
   
function play(speaker: Speaker) {
  speaker.speak();
}
    
play(new Headphones()); // in ear: la la la
                </code></pre>
            </section>
            <section>
                <p>Classes</p>
                <pre><code>class A {
  name: string;
}</code></pre>
                <p>... compile to</p>
                <pre><code>var A = (function () {
  function A() {
  }
  return A;
}());</code></pre>
                <p>Interfaces</p>
                <pre><code>interface A {
  name: string;
}</code></pre>
                <p class="fragment">... compile to <i>nothing</i>.</p>
            </section>
            <section>
                <h3>What are interfaces for</h3>
                <p>Interfaces define contracts.</p>
                <pre><code>function sayHelloTo(person: { name: string }) {
  console.log(person.name);
}</code></pre>
                <p>... using Interfaces</p>
                <pre><code>interface NamedPerson {
  name: string;
}

function sayHelloTo(person: NamedPerson) {
  console.log(person.name);
}</code></pre>
                <aside class="notes">
                    Implications of interfaces transpiling to nothing: <br>
                    <ul>
                        <li>Marker interfaces are not possible in TS</li>
                        <li>You can not call instanceof with interfaces</li>
                    </ul>
                </aside>
            </section>
            <section>
                <h2>Type Inference</h2>
                <pre><code data-trim class="typescript">
let x = [1, 2, 3]; // x becomes number[]

// zoo becomes (Rhino | Elephant | Snake)[]
let zoo = [new Rhino(), new Elephant(), new Snake()];

// corrects type
let zoo: Animal[] = [new Rhino(), new Elephant(), new Snake()];
              </code></pre>
            </section>
            <section>
                <h2>Advanced Types / Type Narrowing</h2>
                <pre><code class="typescript" data-trim>
function padLeft(value: string, padding: any) {
  if (typeof padding === 'number') {
    return Array(padding + 1).join(' ') + value;
  }

  if (typeof padding === 'string') {
    return padding + value;
  }

  throw new Error(`Expected string or number, got '${padding}'.`);
}
              </code></pre>
            </section>
            <section>
                <h2>Strict Null Checks</h2>
                <pre><code class="typescript" data-trim>
interface MyType {
  name: string;
}

function myFunc(val: MyType) {
  // ...
}

myFunc(null); // compiler error
myFunc(undefined); // compiler error
              </code></pre>
              <aside class="notes">
                <ul>
                    <li>Sometimes confusing for beginners and therefore turned of for the exercises</li>
                    <li>Should be turned on in real world projects. Default is false though</li>
                </ul>
            </aside>
            </section>
            <section>
                <pre><code class="typescript" data-trim>
function query(method: 'GET'|'POST'|'PUT') {
  // highly suffisticated stuff here...
}

query('otto');
                </code></pre>
                <p>will it compile?</p>
                <div class="fragment">
                    <img src="img/specific-string-example.png" class="plain no-border" alt="">
                    <p>More specific than a string - cool, right?</p>
                </div>
            </section>
        </div>
    </div>

    <script src="../node_modules/reveal.js/js/reveal.js"></script>
    <script src="../common/reveal-config.js"></script>

    <script>
        // More info https://github.com/hakimel/reveal.js#configuration
        Reveal.initialize({ ...revealConfig });
    </script>
</body>

</html>