<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Introduction to ngrx</title>
    <link rel="icon" href="../common/img/favicon.ico">

    <link href="https://fonts.googleapis.com/css?family=Ubuntu+Mono" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">
    <link rel="stylesheet" href="../node_modules/reveal.js/css/reveal.css">
    <link rel="stylesheet" href="../node_modules/reveal.js/css/theme/white.css" id="theme">

    <link rel="stylesheet" href="../common/css/common.css">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="../common/css/github-gist.css">

    <!-- Printing and PDF exports -->
    <script>
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match(/print-pdf/gi) ? '../node_modules/reveal.js/css/print/pdf.css' : '../node_modules/reveal.js/css/print/paper.css';
        document.getElementsByTagName('head')[0].appendChild(link);
    </script>
</head>

<body>
    <section class="angular-link">
        <a href="http://angular.io" target="_blank"><img height="50px" src="../common/img/angular.svg"></a>
    </section>
    <section class="devon-link">
        <a href="http://devonfw.github.io" target="_blank"><img height="30px" src="../common/img/devon_logo_blue.png"></a>
    </section>
    <div class="devon reveal">
        <div class="slides">
            <section>
                <h2>Introduction to</h2>
                <img class="no-border" src="img/ngrx-logo.png" alt="ngrx logo">
                <p><a href="https://github.com/ngrx">ngrx</a></p>
                <p>Philip Schmökel & Philipp Huber</p>
            </section>
            <section>
                <blockquote cite="https://github.com/ngrx/platform/blob/master/docs/store/README.md">
                    &ldquo;RxJS powered state management for Angular applications, inspired by Redux&rdquo;
                </blockquote>
            </section>
            <section>
                <section>
                    <h3>Reactive Architecture</h3>
                </section>
                <section>
                    <h2>Scaling MVC Applications</h2>
                    <div class="image-box">
                        <img width="600px" style="margin-right: 50px" src="img/ng-state-everwhere.png">
                        <ul style="width: 500px">
                            <li>Debugging?</li>
                            <li>Testing?</li>
                            <li>Understanding?</li>
                            <li>Server Side Rendering?</li>
                        </ul>
                    </div>
                    <p style="font-size: 18px; display:flex"><a href="http://onehungrymind.com/build-better-angular-2-application-redux-ngrx/">http://onehungrymind.com/build-better-angular-2-application-redux-ngrx/</a></p>
                </section>
                <section>
                    <p style="font-style: italic">UI = f ( State )</p>
                </section>
                <section
                    data-background-image="img/uifunction.png"
                    data-background-size="contain">
                </section>
                <section
                    data-background-image="img/state-example-1.png"
                    data-background-size="contain">
                </section>
                <section
                    data-background-image="img/state-example-2.png"
                    data-background-size="contain">
                </section>
                <section
                    data-background-image="img/state-example-3.png"
                    data-background-size="contain">
                </section>
                <section>
                    <h2>What Frameworks To Know?</h2>
                    <div style="display:flex; justify-content: space-around;">
                        <div class="image-box">
                            <img width="150px" src="img/react.png" style="margin-right: 20px">
                            <p class="fragment" data-fragment-index="0" style="font-size: 30px; display:flex"><a href="https://facebook.github.io/react/">React</a></p>
                        </div>
                        <div class="image-box">
                            <img width="150px" src="img/flux.png" style="margin-right: 20px">
                            <p class="fragment" data-fragment-index="1" style="font-size: 30px; display:flex"><a href="https://facebook.github.io/flux/">Flux</a></p>
                        </div>
                    </div>
                    <div style="display:flex; justify-content: space-around;">
                        <div class="image-box">
                            <img width="150px" src="img/redux.png" style="margin-right: 20px">
                            <p class="fragment" data-fragment-index="2" style="font-size: 30px; display:flex"><a href="http://redux.js.org/">Redux</a></p>
                        </div>
                        <div class="image-box">
                            <img width="150px" src="img/ngrx.png" style="margin-right: 20px">
                            <p class="fragment" data-fragment-index="3" style="font-size: 30px; display:flex"><a href="https://github.com/ngrx">ngrx</a></p>
                        </div>
                    </div>
                </section>
                <section
                    data-background-image="img/store-view-actions.png"
                    data-background-size="contain">
                </section>
                <section>
                    <h2>Reducer Function</h2>
                    <pre class="width-100-percent"><code class="typescript max-height-unset" data-trim data-noescape>
    export function counterReducer(state: number = 0, action: Action) {
      switch (action.type) {
        case INCREMENT:
          return state + 1;
    
        case DECREMENT:
          return state - 1;
    
        case RESET:
          return 0;
    
        default:
          return state;
      }
    }
                    </code></pre>
                </section>
                <section>
                    <h2>Store - Tree Of Reducers</h2>
                    <img src="img/reducer-composite.png">
                </section>
                <section>
                    <h2>State goes down</h2>
                    <p>... using Angular <code>@Input</code> syntax.</p>
                    <img src="img/state-goes-down.png">
                </section>
                <section>
                    <h2>Events go up</h2>
                    <p>... using Angular <code>@Output</code> syntax.</p>
                    <img src="img/events-go-up.png">
                </section>
                <section>
                    <h2>HTTP Request (XHR)</h2>
                    <img src="img/xhr.png">
                </section>
                <section>
                    <h2>Websockets Push</h2>
                    <img src="img/websockets-push.png">
                </section>
                <section>
                    <h2>Websockets Pull</h2>
                    <img src="img/websockets-pull.png">
                </section>
                <section>
                    <h2>Forget Everything And Go Reactive?</h2>
                    <p>Abstraction is the tradeoff which is not always worth it.</p>
                    <ul>
                        <li>For small applications it's simply overkill.</li>
                        <li>Lack of know how.</li>
                        <li>Use it when you need it.</li>
                    </ul>
                </section>
                <section>
                    <p>
                        devonfw provides an architecture which is a compromise between, on the one hand, leveraging the <strong>best practices and latest trends</strong> like reactive style development, on the other hand, providing a <strong>short onboarding time</strong> while still using an architecture that helps us scale and be productive at the same time.</p>
                    <small>see <a href="https://github.com/devonfw/devon4ng/wiki">devon4ng</a></small>
                </section>
            </section>
            <section>
                <section>ngrx in Angular</section>
                <section>
                    <p>State is a single, immutable data structure.</p>
                    <pre class="fragment"><code class="typescript" data-trim>
    export interface AppState {
      name: string;
      age: number;
      showDropdown: boolean;
      isUserLoggedIn: boolean;
    }
              </code></pre>
                </section>
                <section>
                    <p>Actions describe state changes.</p>
                    <pre class="fragment"><code class="typescript" data-trim>
                      this.store.dispatch(
                          FlightAction.loadFlight({flightId: '4711ABC'})
                      );
              </code></pre>
                    <pre class="fragment"><code class="typescript" data-trim>
                      this.store.dispatch(
                          FlightAction.loadFlightSuccess({flight: loadedFlight})
                      );
              </code></pre>
                    <pre class="fragment"><code class="typescript" data-trim>
                      this.store.dispatch(
                          FlightAction.loadFlightError({error: loadingError})
                      );
              </code></pre>
                </section>
                <section>
                    <p>Pure functions called reducers take the previous state and the next action to compute the new state.</p>
                    <pre class="fragment"><code class="typescript" data-trim>
      const counterReducer = createReducer(
        initialState,
        on(FlightAction.loadFlight, 
          (state: FlightState, { flightId }) => 
            ({ ...state, isLoading: true })
        ),
        on(FlightAction.loadFlightSuccess, 
          (state: FlightState, { flight: loadedFlight }) => 
            ({ ...state, 
              error: null,
              isLoading: false,
              flight: loadedFlight })
        ),
        on(FlightAction.loadFlightError...));
              </code></pre>
                </section>
                <section>
                    <p>State accessed with the Store, an observable of state and an observer of actions.</p>
                    <pre class="fragment"><code class="typescript" data-trim>
    export class FlightComponent {
      showSpinner$ = this.store.pipe(
        select(state => state.isLoading));
    
      constructor(private store: Store&lt;AppState&gt;) {}
    
      onInput(flightId: string) {
        this.store.dispatch(FlightAction.loadFlight({flightId}));
      }
    }
              </code></pre>
                </section>
                <section>
                    <p>Let's try this out and feel the power of reactive architecture!</p>
                </section>
            </section>

        </div>
    </div>

    <script src="../node_modules/reveal.js/js/reveal.js"></script>
    <script src="../common/reveal-config.js"></script>

    <script>
        // More info https://github.com/hakimel/reveal.js#configuration
        Reveal.initialize({ ...revealConfig });
    </script>
</body>

</html>